# 持仓分享图测试指南

## ✅ 功能已完成

持仓分享图生成功能已经实现，**即使没有卡通图片也可以测试**！

## 🚀 快速测试

### 1. 从账户详情页面访问

1. 访问任意账户详情页面：
   ```
   http://stocks.1plabs.pro/accounts/{账户ID}/
   ```

2. 点击"当前持仓"卡片右上角的 **📸 导出图片** 按钮

3. 自动跳转到分享页面

### 2. 直接访问分享页面

```
http://stocks.1plabs.pro/accounts/{账户ID}/share/
```

### 3. 生成分享图

1. 点击页面上的 **"生成图片"** 按钮
2. 等待2-3秒
3. 查看预览
4. 点击 **"💾 下载图片"** 保存

## 📸 当前效果（无卡通图片）

由于还没有提供卡通图片，系统会显示一个漂亮的占位符：

```
┌─────────────────────────────┐
│  📊 Stocks-Lab              │
│                             │
│   % Unrealized P/L          │
│   +101.45%                  │
│                             │
│      ┌─────────┐            │
│      │         │            │  ← 白色虚线圆圈
│      │   👑    │            │  ← 皇冠emoji
│      │ MASCOT  │            │  ← 占位文字
│      │         │            │
│      └─────────┘            │
│                             │
│  ┌─────────────────────┐   │
│  │ 02899    Price      │   │
│  │ 股票名   38.26      │   │
│  │          Avg Cost   │   │
│  │          153.04     │   │
│  └─────────────────────┘   │
│                             │
│  港股      Jan 10, 2026     │
│              ⚪ Watermark   │
│                             │
│  [1PLABS PRO 背景水印]      │
└─────────────────────────────┘
```

## 🎨 占位符设计

- **形状**: 400px圆形，白色虚线边框
- **图标**: 👑 皇冠emoji (180px)
- **文字**: "MASCOT" (48px)
- **背景**: 半透明白色，毛玻璃效果
- **效果**: 优雅、专业、不影响测试

## 📐 完整规格

### 输出图片
- **尺寸**: 1080 x 1920 像素
- **比例**: 9:16（手机竖屏）
- **格式**: PNG高清
- **质量**: 2倍缩放（超清）

### 背景渐变
- **盈利**: 绿色渐变 (#00C853 → #00E676)
- **亏损**: 红色渐变 (#F44336 → #FF5252)

### 显示内容
- ✅ 平台Logo
- ✅ 盈亏百分比（自动计算）
- ✅ 占位符图案（或卡通图片）
- ✅ 股票代码和名称
- ✅ 现价和均价
- ✅ 用户名和日期
- ✅ 水印徽章
- ✅ 背景大字水印 "1PLABS PRO"

## 🔄 添加真实卡通图片

当你准备好卡通图片后：

### 1. 图片要求
- **尺寸**: 800 x 800 像素
- **格式**: PNG
- **背景**: 必须透明
- **风格**: 可爱、专业、或搞笑

### 2. 保存位置
```bash
/home/lanlic/Html-Project/Stocks-Lab/static/images/mascot.png
```

### 3. 刷新页面
保存图片后，刷新分享页面，占位符会自动替换为真实图片。

## 🎯 测试场景

### 场景1: 盈利状态
- 持仓成本 < 现价
- 显示绿色背景
- 百分比前显示 "+"

### 场景2: 亏损状态
- 持仓成本 > 现价
- 显示红色背景
- 百分比前显示 "-"

### 场景3: 无持仓数据
- 显示提示信息
- 不生成图片

## 📱 分享建议

生成的图片适合：
- 微信朋友圈
- Instagram Story
- 小红书
- 抖音
- 任何社交媒体

## 🐛 常见问题

### Q1: 图片生成失败？
**A**: 检查浏览器控制台错误信息，可能是html2canvas加载问题。

### Q2: 图片模糊？
**A**: 已设置2倍缩放，应该很清晰。如果还模糊，检查浏览器缩放比例。

### Q3: 占位符不显示？
**A**: 确保浏览器支持emoji显示。

### Q4: 下载的图片在哪？
**A**: 浏览器默认下载文件夹，文件名格式：`持仓分享-{时间戳}.png`

## 🎨 自定义建议

如果想修改设计：

1. **颜色**: 修改 `.share-bg` 的渐变色
2. **字体**: 修改 `font-family` 和 `font-size`
3. **布局**: 调整各元素的 `top/bottom` 位置
4. **水印**: 修改 `.watermark` 的文字和样式

## 📊 数据来源

- **账户信息**: 从 `/api/v1/accounts/{id}/` 获取
- **持仓数据**: 从账户API的 `positions` 字段获取
- **盈亏计算**: 前端自动计算（现价 - 成本价）/ 成本价 × 100%

## 🚀 下一步优化

可以考虑的功能增强：
1. 支持选择不同持仓生成图片
2. 支持自定义背景颜色
3. 支持添加个性化文字
4. 支持多种尺寸（正方形、16:9等）
5. 支持批量生成

---

## 立即测试

1. 访问: `http://stocks.1plabs.pro/accounts/9/share/`（替换9为你的账户ID）
2. 点击"生成图片"
3. 查看效果
4. 下载保存

**即使没有卡通图片，也能生成漂亮的分享图！** 🎉
